# springboot-sun-api

This is a REST API microservice integrated with [OpenAPI API](https://openai.com/product) and [Sunrise/Sunset API](https://sunrise-sunset.org/api). It provides the following 3 endpoints:

1. An endpoint which will return the current sunlight's Kelvin color temperature at given latitude and longitude coordinates.

2. An endpoint which will return a short poem generated by ChatGPT fitting a theme based on the sun's current position (sunrise, daylight, sunset, moonlight) at given latitude and longitude coordinates.

3. An endpoint which will list all of the previous requests and responses sent to the API.



### Dependencies:

- Java 17
- Maven 3.8.1
- Spring Boot 3.2.1
- H2 Database

### Prerequisite

please update the OpenAI key at "openai.api.key" in application.properties file before building / running the application.

### Build the application
```
mvn clean package
```

### Run the application
```
java -jar target/sun-api-0.0.1-SNAPSHOT.jar
```

### Test the API

There are 3 endpoints exposed by this application. 

Please access all endpoints using **Basic Authentication**

- Username: user
- Password: password

1. Endpoint returning current sunlight's Kelvin color temperature
   
   - Sample request:
     ```
     GET http://localhost:8080/api/sun/temp?lat=36.7201600&lng=-60.4203400
     ```
   - Sample response:
     ```
     2700
     ```

2. Endpoint returning a short poem
   - Sample request:
       ```
       GET http://localhost:8080/api/sun/poem?lat=36.7201600&lng=-60.4203400
       ```
   - Sample response:
     ```
     In shadows cast by the sun's farewell,
     The moon's gentle embrace does dwell.
     Silent rays dance upon the night,
     Illuminating darkness with pure light.
     ...
     ```
     
3. Endpoint returning the list of requests / responses sent to the API

   - Sample request:
       ```
       GET http://localhost:8080/api/sun/history
       ```
   - Sample response:
     ```
      [
          {
          "id": 1,
          "lat": "36.7201600",
          "lng": "-60.4203400",
          "response": "2700",
          "timestamp": "2024-01-05T01:21:27.060466Z"
          }
      ]
        ```
